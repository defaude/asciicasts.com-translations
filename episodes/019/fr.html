<p>Au travers des 3 prochains épisodes, nous allons vous montrer une excellente façon d'ajouter une aadministration à
votre site.</p>
<img src="/system/photos/15/original/E019I01.png" width="709" height="458"/>
<p>Ci-dessus une représentation d'ASCIIcasts avant qu'il n'y ait ses fonctions d'administration. Il n'y avait aucune
façon d'écrire les épisodes sans utiliser <code>script/console</code> ou en modifiant manuellement la base de données.
Ce que nous aimerions faire, c'est ajouté une interface d'administration au site pour pouvoir faire nos changements via
le site.</p>
<p>L'ancienne façon de faire aurait été de générer un ensemble de fichier pour chaque épisode via le module
d'administration.</p>
<pre class="ruby">
script/generate scaffold episode &quot;admin/episodes&quot;
</pre>
<p>Ceci fournira un ensemble de pages d'administration pour nous permettre de gérer nos épisodes.</p>
<img src="/system/photos/16/original/E019I02.png" width="654" height="326" />
<p>Cette approche fonctionne mais elle n'est pas idéale vu que nous dupliquons des fonctionnalités. Nous avons déjà une
page qui liste nos épisodes : la page d'accueil du site. Au lieu d'écrire une section d'administration entièrement
séparée, nous pouvons placer nos liens d'administration dans le site public. (Bien sûr, nous ne voudrons que nos liens
ne soient visibles que par les administrateurs connectés !)</p>

<h3>Implémenter les liens d'administration</h3>
<p>Les résumés des épisodes dans la page d'index sont rendues via une vue partielle (partial).</p>
<pre class="ruby">
&lt;li&gt;
	&lt;p class=&quot;episodeId&quot;&gt;&lt;%= episode.episode_id %&gt;&lt;/p&gt;
	&lt;h3&gt;&lt;%= link_to episode.title, episode_path(episode.identifier) %&gt;&lt;/h3&gt;
	&lt;p class=&quot;summary&quot;&gt;&lt;%= episode.summary %&gt;&lt;/p&gt;
	&lt;p class=&quot;tagList&quot;&gt;Tags: &lt;% episode.tags.each do |tag| %&gt; &lt;%= link_to tag.title, tag_path(tag.title) %&gt; &lt;% end %&gt;&lt;/p&gt;
	&lt;p class=&quot;adminActions&quot;&gt;
	  &lt;%= link_to &quot;Edit&quot;, edit_episode_path(episode) %&gt;
	  &lt;%= link_to &quot;Destroy&quot;, episode_path(episode), :confirm =&gt; &quot;Are you sure?&quot;, :method =&gt; :delete %&gt;
	&lt;/p&gt;
&lt;/li&gt;
</pre>
<p class="title">La vue partielle <code>episode</code> avec les liens <code>edit</code> et <code>destroy</code> qjoutés.</p>
  
<p>En bqs de la page d'index nous allons ajouter un lien pour créer un nouvel épisode :</p>
<pre class="ruby">
&lt;%= link_to &ldquo;New&rdquo;, new_episode_path %&gt;
</pre>
<p>Maintenant, notre page d'index a les liens d'administration mais nous avons deux problèmes. D'abord, les liens ne
font puisque nous n'avons pas les actions new, edit et destroy pour le moment; Ensuite, les liens peuvent être vus par
n'importe qui. Le premier problème peut être résolu facilement en écrivant le code approprié pour les actions
<code>new</code>, <code>edit</code>, <code>update</code>. Nous aborderons le deuxième problème dans le prochain épisode.</p>
<img src="/system/photos/17/original/E019I03.png" width="663" height="558" />
